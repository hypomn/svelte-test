<h1>{{listTitle}}</h1>

<input type="text" ref:newTodo bind:value="newTodoItemTitle" placeholder="Enter a TODO" autofocus/><button on:click="addNewTodo(newTodoItemTitle)">Add TODO</button>
<ul>
{{#each todoItems as todoItem}}
<li class="todo-item-{{todoItem.done ? 'done' : 'undone'}}">{{todoItem.title}}<input type="checkbox" bind:checked="todoItem.done"></li>
{{/each}}
</ul>

<p>{{undoneTodos.length ? `You have ${undoneTodos.length} uncompleted TODOs.` : 'Congratulations! You have no TODOs.'}}</p>

<style>
	.todo-item-done {
		text-decoration: line-through;
	}
</style>

<script>
  export default {
    data () {
      return {
				listTitle: "Generic TODO list",
        todoItems: [],
				newTodoItemTitle: ''
      };
    },
	
		computed: {
			undoneTodos: todoItems => todoItems.filter(item => !item.done),
			doneTodos: todoItems => todoItems.filter(item => item.done)
		},
		
		methods: {
			addNewTodo (newTodoItemTitle) {
				if (newTodoItemTitle !== '') {
					const todoItems = this.get('todoItems');
					
					todoItems.push({
						title: newTodoItemTitle,
						done: false
					});
					
					this.set({todoItems});
					this.refs.newTodo.value = '';
				} else {
					this.refs.newTodo.focus();
				}
			}
		}
  };
</script>